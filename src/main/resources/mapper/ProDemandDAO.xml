<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.james.pms_1.dao.ProDemandDAO" >
    <insert id="insertById" parameterType="cn.james.pms_1.entity.ProDemand">
        insert into pro_demand
        (demandName, userId, demandDesc, demandInfo, ideasSource, demandType, demandOpen, createTime, lastTime)
        VALUES
        (#{demandName}, #{userId}, #{demandDesc}, #{demandInfo}, #{ideasSource}, #{demandType}, #{demandOpen}, #{createTime}, #{lastTime})
    </insert>
    <select id="selectDemandIdByDemandName" parameterType="java.lang.String" resultType="java.lang.Integer">
        select demandId from pro_demand where `demandName`=#{demandName}
    </select>
    <update id="updateById" parameterType="cn.james.pms_1.entity.ProDemand">
        update pro_demand
        set
        `demandName`=#{demandName}, `demandDesc`=#{demandDesc}, `demandInfo`=#{demandInfo},`ideasSource`=#{ideasSource}, `demandType`=#{demandType}, `demandOpen`=#{demandOpen}, `lastTime`=#{lastTime}
        where `demandId`=#{demandId}
    </update>
    <select id="selectDemandNameByDemandOpen" resultType="java.util.Map">
        select demandId, demandName from pro_demand where demandOpen=true
    </select>
    <select id="selectAll" parameterType="cn.james.pms_1.entity.ProDemand" resultType="cn.james.pms_1.entity.ProDemand">
        select * from pro_demand
        <where>
            <if test="demandName!=null and demandName!=''">
                AND demandName LIKE concat('%',#{demandName},'%')
            </if>
        </where>
    </select>
    <select id="selectAllDemandDescByDemandOpen" resultType="java.util.Map">
        select demandId, demandName, demandDesc from pro_demand where demandOpen = true
    </select>

</mapper>